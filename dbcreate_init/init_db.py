"""初始化数据库脚本"""
import sqlite3
import os

# 删除旧数据库
if os.path.exists('music.db'):
    os.remove('music.db')

# 连接数据库
conn = sqlite3.connect('music.db')
cursor = conn.cursor()

# 读取并执行 schema.sql 创建表结构
with open('schema.sql', 'r', encoding='utf-8') as f:
    schema_sql = f.read()
    cursor.executescript(schema_sql)


# 插入 ZUTOMAYO 专辑数据
albums_data = [
    ('正しい偽りからの起床', '2018.11.14', 'https://zutomayo.net/upload/DISCOGRAPHY/5/5ef5b53fcd369.jpeg'),
    ('今は今で誓いは笑みで', '2019.6.12', 'https://zutomayo.net/upload/DISCOGRAPHY/8/5ef5b607e35c6.jpeg'),
    ('潜潜話', '2019.10.30', 'https://zutomayo.net/upload/DISCOGRAPHY/9/5f0305ec907bf.jpeg'),
    ('朗らかな皮膚とて不服', '2020.8.5', 'https://zutomayo.net/upload/DISCOGRAPHY/11/5f030dd521f04.jpeg'),
    ('ぐされ', '2021.2.10', 'https://zutomayo.net/upload/DISCOGRAPHY/16/5fa3f3c654836.jpeg'),
    ('伸び仕草懲りて暇乞い', '2022.2.16', 'https://zutomayo.net/upload/DISCOGRAPHY/26/20220216.jpg'),
    ('沈香学', '2023.6.7', 'https://etbr-cms-site.s3.ap-northeast-1.amazonaws.com/zutomayo.net/share/release/Jinkougaku_H1.jpg'),
    ('虚仮の一念海馬に託す', '2024.10.23', 'https://etbr-cms-site.s3.ap-northeast-1.amazonaws.com/zutomayo.net/share/release/31/jkt.jpg'),
]

cursor.executemany(
    'INSERT INTO albums (title, release_date, cover_image) VALUES (?, ?, ?)',
    albums_data
)

# 插入曲目数据
tracks_data = [
    # 正しい偽りからの起床
    (1, 1, '秒針を噛む', '04:10'),
    (1, 2, 'ヒューマノイド', '04:19'),
    (1, 3, 'サターン', '04:10'),
    (1, 4, '雲丹と栗', '04:32'),
    (1, 5, '脳裏上のクラッカー', '04:29'),
    (1, 6, '君がいて水になる', '04:45'),
    
    # 今は今で誓いは笑みで
    (2, 1, '勘冴えて悔しいわ', '03:58'),
    (2, 2, '正義', '04:30'),
    (2, 3, 'またね幻', '04:02'),
    (2, 4, 'マイノリティ脈絡', '05:00'),
    (2, 5, '彷徨い酔い温度', '04:52'),
    (2, 6, '眩しいDNAだけ', '03:46'),
    
    # 潜潜話
    (3, 1, '脳裏上のクラッカー', '04:30'),
    (3, 2, '勘冴えて悔しいわ', '03:56'),
    (3, 3, '居眠り遠征隊', '03:38'),
    (3, 4, 'ハゼ馳せる果てるまで', '04:04'),
    (3, 5, '蹴っ飛ばした毛布', '04:26'),
    (3, 6, 'Dear. Mr「F」', '05:26'),
    (3, 7, 'こんなこと騒動', '04:57'),
    (3, 8, '眩しいDNAだけ', '03:47'),
    (3, 9, 'ヒューマノイド', '04:19'),
    (3, 10, 'グラスとラムレーズン', '03:54'),
    (3, 11, '正義', '04:31'),
    (3, 12, '優しくLAST SMILE', '04:05'),
    (3, 13, '秒針を噛む', '04:20'),
    
    # 朗らかな皮膚とて不服
    (4, 1, '低血ボルト', '03:34'),
    (4, 2, 'お勉強しといてよ', '04:39'),
    (4, 3, 'Ham', '03:40'),
    (4, 4, 'JK BOMBER', '03:55'),
    (4, 5, 'マリンブルーの庭園', '03:34'),
    (4, 6, 'MILABO', '04:27'),
    
    # ぐされ
    (5, 1, '胸の煙', '04:09'),
    (5, 2, '正しくなれない', '04:00'),
    (5, 3, 'お勉強しといてよ', '04:39'),
    (5, 4, '勘ぐれい', '04:09'),
    (5, 5, 'はゔぁ', '03:38'),
    (5, 6, '機械油', '03:16'),
    (5, 7, '暗く黒く', '04:09'),
    (5, 8, 'MILABO', '04:29'),
    (5, 9, 'ろんりねす', '04:53'),
    (5, 10, '繰り返す収穫', '03:54'),
    (5, 11, '過眠', '04:13'),
    (5, 12, '低血ボルト', '03:35'),
    (5, 13, '奥底に眠るルーツ', '04:23'),
    
    # 伸び仕草懲りて暇乞い
    (6, 1, '違う曲にしようよ', '03:39'),
    (6, 2, '袖のキルト', '04:14'),
    (6, 3, 'あいつら全員同窓会', '04:14'),
    (6, 4, '猫リセット', '04:06'),
    (6, 5, '夜中のキスミ', '04:35'),
    (6, 6, 'ばかじゃないのに', '04:14'),
    
    # 沈香学
    (7, 1, '花一匁', '04:10'),
    (7, 2, '残機', '03:50'),
    (7, 3, '猫リセット', '04:06'),
    (7, 4, '綺羅キラー(feat. Mori Calliope)', '04:13'),
    (7, 5, '馴れ合いサーブ', '03:57'),
    (7, 6, 'あいつら全員同窓会', '04:14'),
    (7, 7, '夏枯れ', '03:55'),
    (7, 8, '袖のキルト', '04:14'),
    (7, 9, '不法侵入', '04:20'),
    (7, 10, 'ばかじゃないのに', '04:14'),
    (7, 11, '消えてしまいそうです', '04:18'),
    (7, 12, 'ミラーチューン', '04:09'),
    (7, 13, '上辺の私自身なんだよ', '04:07'),
    
    # 虚仮の一念海馬に託す
    (8, 1, '虚仮にしてくれ', '04:18'),
    (8, 2, 'TAIDADA', '03:46'),
    (8, 3, 'クズリ念', '03:55'),
    (8, 4, '海馬成長痛', '03:09'),
    (8, 5, '嘘じゃない', '04:18'),
    (8, 6, 'Blues in the Closet', '03:39')
]

cursor.executemany(
    'INSERT INTO tracks (album_id, track_number, title, duration) VALUES (?, ?, ?, ?)',
    tracks_data
)

# 提交并关闭
conn.commit()
conn.close()

print('ZUTOMAYO 数据库初始化成功！')